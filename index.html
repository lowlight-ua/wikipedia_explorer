<!DOCTYPE html>
<html>
<head>
<style>
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="wikipedia_explorer.js"></script>
<script>

function onGoClick()
{
    appl = new Application(); 
    let graph = appl.graph;

    let thePage = $("#pagetitle").val();
    if (thePage.length == 0)
    {
        return;
    }
    graph.centerArticle = thePage;

    $.ajax( {
        url: 'https://en.wikipedia.org/w/api.php',
        data: {
            action: 'query',
            prop: 'links',
            format: 'json',
            titles: thePage,
            plnamespace: 0,
            origin: '*',
            pllimit: 'max'
        },
        xhrFields: {
            withCredentials: false
        },
        dataType: 'json'
    } ).done(function(data) { appl.gotWikiLinks(data); });

    $.ajax( {
        url: 'https://en.wikipedia.org/w/api.php',
        data: {
            action: 'query',
            prop: 'linkshere',
            titles: thePage,
            format: 'json',
            lhnamespace: 0,
            origin: '*',
            lhlimit: 'max'
        },
        xhrFields: {
            withCredentials: false
        },
        dataType: 'json'
    } ).done(function(data) { appl.gotWikiBacklinks(data); });  

    $.ajax( {
        url: 'https://en.wikipedia.org/w/api.php',
        data: {
            action: 'query',
            list: 'search',
            srsearch: thePage,
            format: 'json',
            formatversion: 2,
            origin: '*',
            srlimit: 25
        },
        xhrFields: {
            withCredentials: false
        },
        dataType: 'json'
    } ).done(function(data) { appl.gotWikiSearchResult(data); });  
}

$(document).ready(function()
{    
    $("#gobutton").click(onGoClick);
});

</script>

</head>

<body>

<input type="text" id="pagetitle"><br>
<input type="button" id="gobutton" value="GO">

<div id="output">
    <pre id="json_out">
        NOTHING HERE
    </pre>
</div>

</body>

</html>
