<!DOCTYPE html>
<html>
<head>
<style>
</style>

<script src="http://viz-js.com/bower_components/viz.js/viz.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
<script src="model.js"></script>
<script src="api_base.js"></script>
<script src="api_phase1.js"></script>
<script src="api_phase2.js"></script>
<script src="api_phase3.js"></script>
<script src="analysis.js"></script>
<script src="output.js"></script>
<script src="wikipedia_explorer.js"></script>
<script>

function onGoClick() {
    let thePage = $("#pagetitle").val();
    if (thePage.length == 0) {
        return;
    }

    expl = new Explorer();
    expl.run(thePage);
}

$(document).ready(function() {   
    $("#wait_anim").hide(); 
    $("#gobutton").click(onGoClick);


    $("#pagetitle").autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "http://en.wikipedia.org/w/api.php",
                dataType: "jsonp",
                data: {
                    'action': "opensearch",
                    'format': "json",
                    'search': request.term
                },
                success: function(data) {
                    response(data[1]);
                }
            });
        }
    }).on("autocompleteselect", function( event, ui ) {
        onGoClick();
    }).keyup(function(e) {
        if(e.keyCode == 13) {
            $("#pagetitle").autocomplete( "close" );
            onGoClick();
        }
    });
});

</script>

</head>

<body>

<input type="text" class="ui-widget" style="width: 500px;" id="pagetitle">
<input type="button" id="gobutton" class="ui-widget" value="     Create graph     "> <BR><BR>
<img id="wait_anim" src="https://i.stack.imgur.com/FhHRx.gif"> 

<pre id="progress_div"></pre>
<div id="output_div"></div>

</body>

</html>
